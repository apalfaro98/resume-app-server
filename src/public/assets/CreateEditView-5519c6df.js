import{d as O,r as m,o as q,a as c,c as j,b as v,e as t,t as y,u as h,f as E,w as s,v as r,g as N,h as S,i as b,j as A}from"./index-5005e09e.js";const D={class:"ml-6 mt-6"},F={class:"text-3xl"},M={key:0,class:"text-lg mt-3 font-bold text-red-600"},R={class:"flex max-w-4xl justify-between items-center"},I={class:"my-6 text-lg"},T=t("label",{for:"name"},"Nombre: ",-1),G={class:"my-6 text-lg"},H=t("label",{for:"abilities"},"Habilidades: ",-1),W={class:"ml-3 block"},z={class:"my-6 text-lg"},J=t("label",{for:"age"},"Edad: ",-1),K={class:"my-6 text-lg"},L=t("label",{for:"email"},"Correo Electrónico: ",-1),P={class:"my-6 text-lg"},Q=t("label",{for:"dateOfBirth"},"Fecha de Nacimiento: ",-1),X={class:"my-6 text-lg"},Y=t("label",{for:"isUrl"},"¿Subir url de la imagen?: ",-1),Z={key:0,class:"my-6 text-lg"},$=t("label",{for:"image"},"Imagen: ",-1),ee={key:1,class:"my-6 text-lg"},te=t("label",{for:"imageUrl"},"Url de la Imagen: ",-1),oe=O({__name:"CreateEditView",setup(le){const d=S(),g=A(),l=m({name:"",abilities:[],age:0,dateOfBirth:"",email:"",imageUrl:void 0}),n=m(""),p=m(!1),u=m(void 0),i=m("");q(()=>{d.query.action==="edit"&&f()});const f=()=>{const o=d.query.id.toString();c.getOne(o).then(e=>{const{name:a,email:V,age:k,dateOfBirth:B,abilities:w}=e;l.value={name:a,email:V,age:k,dateOfBirth:B,abilities:w},e.imageUrl&&e.imageUrl.startsWith("http")&&(p.value=!0,l.value.imageUrl=e.imageUrl),console.log(e)})},x=o=>{const e=o.target;e&&e.files&&(u.value=e.files[0])},_=()=>{n.value&&(l.value.abilities.push(n.value),n.value="")},U=j(()=>l.value.abilities.join(", ")),C=()=>{if(d.query.action==="new")u.value?c.createCV(l.value,u.value).then(o=>{g.push("/home")}).catch(o=>{i.value=o.response.data.errors[0].msg}):(console.log(l.value),c.createCV(l.value).then(o=>{console.log(o),g.push("/home")}).catch(o=>{i.value=o.response.data.errors[0].msg}));else{const o=d.query.id.toString();u.value?c.updateCV(o,l.value,u.value).then(e=>{g.push("/home")}).catch(e=>{i.value=e.response.data.errors[0].msg}):(console.log(l.value),c.updateCV(o,l.value).then(e=>{console.log(e),g.push("/home")}).catch(e=>{i.value=e.response.data.errors[0].msg}))}};return(o,e)=>(b(),v("div",D,[t("h1",F,y(h(d).query.action==="new"?"Crear Nuevo Currículo":"Editar Currículo"),1),i.value?(b(),v("p",M,y(i.value),1)):E("",!0),t("div",R,[t("div",null,[t("div",I,[T,s(t("input",{type:"text",id:"name",class:"border rounded-md ml-2 py-1 px-2 border-gray-800","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name=a)},null,512),[[r,l.value.name]])]),t("div",G,[H,s(t("input",{type:"text",id:"abilities",class:"border rounded-md ml-2 py-1 px-2 border-gray-800","onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a)},null,512),[[r,n.value]]),t("button",{class:"bg-cyan-200 py-2 px-3 rounded-lg font-semibold ml-3",onClick:_}," Agregar "),t("span",W,y(h(U)),1)]),t("div",z,[J,s(t("input",{type:"number",min:"0",max:"120",id:"age",class:"border rounded-md ml-2 py-1 px-2 border-gray-800","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.age=a)},null,512),[[r,l.value.age]])])]),t("div",null,[t("div",K,[L,s(t("input",{type:"text",id:"email",class:"border rounded-md ml-2 py-1 px-2 border-gray-800","onUpdate:modelValue":e[3]||(e[3]=a=>l.value.email=a)},null,512),[[r,l.value.email]])]),t("div",P,[Q,s(t("input",{type:"date",id:"dateOfBirth",class:"border rounded-md ml-2 py-1 px-2 border-gray-800","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.dateOfBirth=a)},null,512),[[r,l.value.dateOfBirth]])]),t("div",X,[Y,s(t("input",{type:"checkbox",id:"isUrl",class:"border rounded-md ml-2 py-1 px-2 border-gray-800","onUpdate:modelValue":e[5]||(e[5]=a=>p.value=a)},null,512),[[N,p.value]])]),p.value?(b(),v("div",ee,[te,s(t("input",{type:"text",id:"imageUrl",class:"border rounded-md ml-2 py-1 px-2 border-gray-800","onUpdate:modelValue":e[7]||(e[7]=a=>l.value.imageUrl=a)},null,512),[[r,l.value.imageUrl]])])):(b(),v("div",Z,[$,t("input",{type:"file",id:"image",accept:"image/jpeg, image/png, image/jpg",class:"border rounded-md ml-2 py-1 px-2 border-gray-800",onChange:e[6]||(e[6]=a=>x(a))},null,32)]))])]),t("button",{class:"bg-blue-500 py-3 px-5 rounded-lg font-semibold ml-3",onClick:C}," Guardar ")]))}});export{oe as default};
